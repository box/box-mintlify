---
alias_paths: {}
title: マーカーベースのページネーション

fullyTranslated: true
---

import {RelatedLinks, MultiRelatedLinks} from "/snippets/related-links.jsx";
import {Link} from "/snippets/Link.jsx";

マーカーベースのページングを使用するAPIは、`marker`および`limit`クエリパラメータを使用してコレクション内の項目のページ割りを行います。

マーカーベースのページネーションがよく使用されるのは、項目の全セットの長さが頻繁に変更される場合や全体の長さが事前にわからない可能性がある場合です。

## ページング

コレクション内のエントリの最初のページを取得するには、APIを`marker`パラメータを指定せずに呼び出すか、`marker`を`0`に設定して呼び出す必要があります。`limit`パラメータは省略可能です。

```sh
curl https://api.box.com/2.0/folders/0/items?limit=100&usemarker=true&marker= \
    -H "authorization: Bearer ACCESS_TOKEN"
```

<Note>
  オフセットベースのページネーションとマーカーベースのページネーションの両方をサポートするAPIでは、マーカーベースのページネーションが使用されるように`usemarker`クエリパラメータを`true`に設定する必要があります。
</Note>

エントリの次のページを取得するには、APIレスポンスで受け取った`next_marker`値の値に等しい`marker`パラメータを指定して、APIを呼び出す必要があります。

```sh
curl https://api.box.com/2.0/folders/0/items?marker=34332423&limit=100&usemarker=true \
    -H "authorization: Bearer ACCESS_TOKEN"
```

次の`next_marker`値がレスポンスオブジェクト内で`null`になっている場合、項目の最終ページはリクエスト済みです。この時点では、これ以上取得する項目がありません。

<Note>
  マーカーベースのページングを使用する場合、コレクション内のエントリの合計数を確認するには、エントリをすべて取得するしかありません。マーカーの内部実装は今後変更される可能性があるため、アプリケーションでは`next_marker`値を長期にわたって保持しないでください。
</Note>

## マーカーと制限

以下のクエリパラメータは、コレクションのページネーションに使用されます。

| クエリパラメータ    | 型       | デフォルト      |                                                                                                               |
| ----------- | ------- | ---------- | ------------------------------------------------------------------------------------------------------------- |
| `marker`    | String  |            | コレクション内で最初に結果を返す位置。これは前のリクエストで返された値です。                                                                        |
| `limit`     | Integer | APIによって異なる | 返される最大エントリ数。値が最大値を超える場合は、最大値が使用されます。                                                                          |
| `usemarker` | Boolean |            | ページネーションのタイプを選択するために、両タイプのページネーションをサポートするAPIエンドポイントで使用可能なクエリパラメータ (省略可)。`true`に設定すると、マーカーベースのページネーションが適用されます。 |

## コレクション

コレクションのページネーションを行うと、APIによって、結果のセットを配列として含むオブジェクトのほか、結果の現在のページに関する情報が返されます。

| フィールド         | 型       |                                                                                 |
| ------------- | ------- | ------------------------------------------------------------------------------- |
| `entries`     | Array   | このページの項目を含むページ。結果がない場合は空の配列になります。                                               |
| `next_marker` | String  | 結果の次のページを取得するために`marker`値として使用できる値。この値が`null`または空の文字列の場合は、これ以上取得する結果がありません。     |
| `limit`       | Integer | 結果の現在のページに使用される制限。この制限は、このAPIエンドポイントに許可されている最大値を超えない限り、`limit`クエリパラメータと同じになります。 |

## エンドポイントの例

以下は、マーカーベースのページネーションをサポートするエンドポイントの例です。

* <Link href="/reference/get-folders-id-items">フォルダ内の項目を取得</Link>
* <Link href="/reference/get-files-id-collaborations">ファイルのコラボレーションのリストを取得</Link>
* <Link href="/reference/get-webhooks">ユーザーのすべてのWebhookのリストを取得</Link>
* <Link href="/reference/get-users">社内のすべてのユーザーのリストを取得</Link>
* <Link href="/reference/get-folders-trash-items">ごみ箱にあるすべての項目のリストを取得</Link>

<RelatedLinks
  title="関連するAPI"
  items={[
  { label: "List items in folder", href: "/reference/get-folders-id-items", badge: "GET" },
  { label: "List file collaborations", href: "/reference/get-files-id-collaborations", badge: "GET" },
  { label: "List folder collaborations", href: "/reference/get-folders-id-collaborations", badge: "GET" },
  { label: "List all webhooks", href: "/reference/get-webhooks", badge: "GET" },
  { label: "List all metadata templates for enterprise", href: "/reference/get-metadata-templates-enterprise", badge: "GET" },
  { label: "List recently accessed items", href: "/reference/get-recent-items", badge: "GET" },
  { label: "List all legal hold policies", href: "/reference/get-legal-hold-policies", badge: "GET" },
  { label: "List enterprise device pins", href: "/reference/get-enterprises-id-device-pinners", badge: "GET" },
  { label: "List enterprise users", href: "/reference/get-users", badge: "GET" },
  { label: "List trashed items", href: "/reference/get-folders-trash-items", badge: "GET" },
  { label: "List enterprise users", href: "/reference/get-users", badge: "GET" }
]}
/>

<RelatedLinks
  title="関連するガイド"
  items={[
  { label: "Sorting responses", href: "/guides/api-calls/sorting", badge: "GUIDE" },
  { label: "Offset-based Pagination", href: "/guides/api-calls/pagination/offset-based", badge: "GUIDE" }
]}
/>
