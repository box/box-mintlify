---
title: フォルダ内のすべての項目に対するメタデータの強制適用

fullyTranslated: true
---

import {Link} from "/snippets/Link.jsx";

import {RelatedLinks, MultiRelatedLinks} from "/snippets/related-links.jsx";

メタデータカスケードポリシーがすでにフォルダに存在する場合は、メタデータカスケードポリシーの`id`を指定して<Link href="/reference/post-metadata-cascade-policies-id-apply">`POST /metadata_cascade_policies/:id/apply`</Link> APIエンドポイントを呼び出すことで、フォルダ内のすべての項目にメタデータインスタンスを強制的に適用できます。

<CodeGroup>
  ```sh cURL
  curl -i -X POST "https://api.box.com/2.0/metadata_cascade_policies/21312/apply" \
       -H "authorization: Bearer <ACCESS_TOKEN>" \
       -H "content-type: application/json" \
       -d '{
         "conflict_resolution": "overwrite"
       }'
  ```

  ```typescript Node/TypeScript v10
  await client.metadataCascadePolicies.applyMetadataCascadePolicy(
    cascadePolicyId,
    {
      conflictResolution:
        'overwrite' as ApplyMetadataCascadePolicyRequestBodyConflictResolutionField,
    } satisfies ApplyMetadataCascadePolicyRequestBody,
  );
  ```

  ```python Python v10
  client.metadata_cascade_policies.apply_metadata_cascade_policy(
      cascade_policy_id, ApplyMetadataCascadePolicyConflictResolution.OVERWRITE
  )
  ```

  ```csharp .NET v10
  await client.MetadataCascadePolicies.ApplyMetadataCascadePolicyAsync(metadataCascadePolicyId: cascadePolicyId, requestBody: new ApplyMetadataCascadePolicyRequestBody(conflictResolution: ApplyMetadataCascadePolicyRequestBodyConflictResolutionField.Overwrite));
  ```

  ```swift Swift v10
  try await client.metadataCascadePolicies.applyMetadataCascadePolicy(metadataCascadePolicyId: cascadePolicyId, requestBody: ApplyMetadataCascadePolicyRequestBody(conflictResolution: ApplyMetadataCascadePolicyRequestBodyConflictResolutionField.overwrite))
  ```

  ```java Java v10
  client.getMetadataCascadePolicies().applyMetadataCascadePolicy(cascadePolicyId, new ApplyMetadataCascadePolicyRequestBody(ApplyMetadataCascadePolicyRequestBodyConflictResolutionField.OVERWRITE))
  ```

  ```java Java v5
  String cascadePolicyID = "e4392a41-7de5-4232-bdf7-15e0d6bba067";
  BoxMetadataCascadePolicy policy = new BoxMetadataCascadePolicy(api, cascadePolicyID);
  policy.forceApply("none");
  ```

  ```py Python v4
  from boxsdk.object.metadata_cascade_policy import CascadePolicyConflictResolution

  cascade_policy = client.metadata_cascade_policy(policy_id='84113349-794d-445c-b93c-d8481b223434')
  cascade_policy.force_apply(CascadePolicyConflictResolution.PRESERVE_EXISTING)
  print('Cascade policy was force applied!')
  ```

  ```csharp .NET v6
  string policyId = "11111";
  string conflictResolution = Constants.ConflictResolution.Overwrite
  BoxMetadataCascadePolicy newCascadePolicy = client.MetadataCascadePolicyManager
      .ForceApplyCascadePolicyAsync(policyId, conflictResolution);
  ```

  ```js Node v4
  var policyID = '84113349-794d-445c-b93c-d8481b223434';
  client.metadata.forceApplyCascadePolicy(policyID, client.metadata.cascadeResolution.PRESERVE_EXISTING)
   .then(() => {
    // application started — no value returned
   });
  ```
</CodeGroup>

<Info>
  ポリシーの`id`を取得するには、フォルダに対する<Link href="/guides/metadata/cascades/list">すべてのポリシーのリストを取得</Link>します。
</Info>

<Warning>
  メタデータカスケード操作は非同期的に開始されます。このAPIコールは、カスケード操作が完了する前に直ちに復帰し、`202 Accepted` HTTPステータスコードを返します。現時点では、この操作がいつ終了したのかを確認する方法はありません。
</Warning>

## 競合解決

このAPIに追加の`conflict_resolution`パラメータを渡すことで、フォルダ内のいずれかの項目でテンプレートの既存のインスタンスを扱う方法を定義できます。

`conflict_resolution`に値を設定していない場合、デフォルトでは、このAPIによってすべての項目の既存の値が保持されます。値を`overwrite`に設定すると、カスケードポリシーに適用されているテンプレートの値が強制的に適用され、既存の値は上書きされます。

<RelatedLinks
  title="関連するAPI"
  items={[
  { label: "Force-apply metadata cascade policy to folder", href: "/reference/post-metadata-cascade-policies-id-apply", badge: "POST" }
]}
/>

<RelatedLinks
  title="関連するガイド"
  items={[
  { label: "List metadata cascade policies", href: "/guides/metadata/cascades/list", badge: "GUIDE" },
  { label: "Force-apply metadata to all items in a folder", href: "/guides/metadata/cascades/force-apply", badge: "GUIDE" },
  { label: "Delete a metadata cascade policy", href: "/guides/metadata/cascades/delete", badge: "GUIDE" }
]}
/>
