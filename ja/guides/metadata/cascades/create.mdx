---
title: メタデータカスケードポリシーの作成

fullyTranslated: true
---

import {Link} from "/snippets/Link.jsx";

import {RelatedLinks, MultiRelatedLinks} from "/snippets/related-links.jsx";

メタデータテンプレートがフォルダに適用されたら、メタデータカスケードポリシーを作成できます。それには、ポリシーの適用先となるフォルダの`folder_id`と、メタデータテンプレートの`scope`および`templateKey`を指定して、<Link href="/reference/post-metadata-cascade-policies">`POST /metadata_cascade_policies`</Link> APIエンドポイントを呼び出します。

<CodeGroup>
  ```sh cURL
  curl -i -X POST "https://api.box.com/2.0/metadata_cascade_policies" \
       -H "authorization: Bearer <ACCESS_TOKEN>" \
       -H "content-type: application/json" \
       -d '{
         "folder_id": "12321",
         "scope": "enterprise_27335",
         "templateKey": "productInfo"
       }'
  ```

  ```typescript Node/TypeScript v10
  await client.metadataCascadePolicies.createMetadataCascadePolicy({
    folderId: folder.id,
    scope: 'enterprise' as CreateMetadataCascadePolicyRequestBodyScopeField,
    templateKey: templateKey,
  } satisfies CreateMetadataCascadePolicyRequestBody);
  ```

  ```python Python v10
  client.metadata_cascade_policies.create_metadata_cascade_policy(
      folder.id, CreateMetadataCascadePolicyScope.ENTERPRISE, template_key
  )
  ```

  ```csharp .NET v10
  await client.MetadataCascadePolicies.CreateMetadataCascadePolicyAsync(requestBody: new CreateMetadataCascadePolicyRequestBody(folderId: folder.Id, scope: CreateMetadataCascadePolicyRequestBodyScopeField.Enterprise, templateKey: templateKey));
  ```

  ```swift Swift v10
  try await client.metadataCascadePolicies.createMetadataCascadePolicy(requestBody: CreateMetadataCascadePolicyRequestBody(folderId: folder.id, scope: CreateMetadataCascadePolicyRequestBodyScopeField.enterprise, templateKey: templateKey))
  ```

  ```java Java v10
  client.getMetadataCascadePolicies().createMetadataCascadePolicy(new CreateMetadataCascadePolicyRequestBody(folder.getId(), CreateMetadataCascadePolicyRequestBodyScopeField.ENTERPRISE, templateKey))
  ```

  ```py Python v4
  folder = client.folder(folder_id='22222')
  metadata_template = client.metadata_template('enterprise', 'securityClassiciation')

  cascade_policy = folder.cascade_metadata(metadata_template)
  print(f'Folder {cascade_policy.parent.id} has a metadata cascade policy for {cascade_policy.scope} template "{cascade_policy.templateKey}"')
  ```

  ```csharp .NET v6
  BoxMetadataCascadePolicy metadataCascadePolicy = await client.MetadataCascadePolicyManager
      .CreateCascadePolicyAsync("22222", "enterprise_11111", "templateKey");
  ```

  ```js Node v4
  var folderID = '22222';
  client.metadata.createCascadePolicy('enterprise', 'testTemplate', folderID)
   .then(cascadePolicy => {
    /* cascadePolicy -> {
     id: '84113349-794d-445c-b93c-d8481b223434',
     type: 'metadata_cascade_policy',
     owner_enterprise: {
      type: 'enterprise',
      id: '11111'
     },
     parent: {
      type: 'folder',
      id: '22222'
     },
     scope: 'enterprise_11111',
     templateKey: 'testTemplate'
    }
    */
   });
  ```
</CodeGroup>

<Info>
  テンプレートの`scope`と`templateKey`を取得するには、<Link href="/guides/metadata/templates/list">すべてのメタデータテンプレートのリストを取得</Link>するか、<Link href="/guides/metadata/instances/list">ファイルのすべてのインスタンスのリストを取得</Link>します。
</Info>

<Warning>
  カスケードポリシーを作成できるのは、指定した`scope`と`templateKey`のフォルダにメタデータインスタンスがすでに適用されている場合のみです。
</Warning>

<RelatedLinks
  title="関連するAPI"
  items={[
  { label: "Create metadata cascade policy", href: "/reference/post-metadata-cascade-policies", badge: "POST" }
]}
/>

<RelatedLinks
  title="関連するガイド"
  items={[
  { label: "List metadata cascade policies", href: "/guides/metadata/cascades/list", badge: "GUIDE" },
  { label: "Force-apply metadata to all items in a folder", href: "/guides/metadata/cascades/force-apply", badge: "GUIDE" },
  { label: "Delete a metadata cascade policy", href: "/guides/metadata/cascades/delete", badge: "GUIDE" }
]}
/>
