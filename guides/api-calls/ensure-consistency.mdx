---
title: "Ensure consistency with headers"
alias_paths: []
---
import {Link} from "/snippets/Link.jsx";

import {RelatedLinks, MultiRelatedLinks} from "/snippets/related-links.jsx";

Some Box APIs support headers used to ensure consistency between your
application and Box.

## `etag`, `if-match`, and `if-none-match`

Many of the file system items (files or folders) that can be requested via the
API return an `etag` value for the item.

For example, a file resource returns an `etag` in the JSON response.

```sh
curl https://api.box.com/2.0/files/12345 \
    -H "authorization: Bearer ACCESS_TOKEN"
```

```json
{
  "id": 12345,
  "etag": 1,
  "type": "file",
  "sequence_id": 3,
  "name": "Contract.pdf",
  ...
}
```

This `etag` can be used as the value of a `if-match` or `if-none-match`
header to either ensure a resource hasn't changed since the `etag` value was
received, or to prevent unnecessary downloads for items that haven't changed.

For example, to fetch the same file only if it has changed, pass in the `etag`
value in a `if-none-match` header.

```sh
curl https://api.box.com/2.0/files/12345 \
    -H "authorization: Bearer ACCESS_TOKEN" \
    -H "if-none-match: 1"
```

This API call would result in an empty response if the file had not changed.

## Ensure consistent changes

The `if-match` header allows your application to ensure that no changes are
made to items when another application or a user has made changes to the item
since your application last inspected it. This helps ensure that
changes aren't lost when two applications or users are changing items at the
same time.

The following endpoints support this header.

| `if-match` capable endpoints                                  |                                 |
| ------------------------------------------------------------- | ------------------------------- |
| <Link href="/reference/post-files-id-content">`POST /files/:id/content`</Link> | Upload a new file version       |
| <Link href="/reference/put-files-id">`PUT /files/:id`</Link>                   | Update a file's information     |
| <Link href="/reference/delete-files-id">`DELETE /files/:id`</Link>             | Delete a file                   |
| <Link href="/reference/put-folders-id">`PUT /folders/:id`</Link>               | Update a folder's information   |
| <Link href="/reference/delete-folders-id">`DELETE /folders/:id`</Link>         | Delete a folder                 |
| <Link href="/reference/put-web-links-id">`PUT /web_links/:id`</Link>           | Update a web link's information |
| <Link href="/reference/delete-web-links-id">`DELETE /web_links/:id`</Link>     | Delete a web link               |

The response of these APIs calls depends on the existence of the item,
and whether the `etag` value matches the most recent version.

| Item found? | Etag match? | HTTP status |
| ----------- | ----------- | ----------- |
| Yes         | Yes         | 200         |
| Yes         | No          | 412         |
| No          | Yes         | 412         |
| No          | No          | 404         |

<Warning>
  **Moving items**

  The `if-match` header can not be used to prevent moving of files, folders,
  or web links. Instead, Box will always ensure that the latest item is moved to
  the new location.
</Warning>

## Prevent unnecessary request downloads

The `if-none-match` header allows your application to ensure that no information
is downloaded for items that have not changed since your application last
inspected it. This helps ensure no unnecessary information is downloaded,
speeding up your application and saving on bandwidth.

| `if-none-match` capable endpoints                   |                                 |
| --------------------------------------------------- | ------------------------------- |
| <Link href="/reference/get-files-id">`GET /files/:id`</Link>         | Get a file's information        |
| <Link href="/reference/get-folder-id">`GET /folders/:id`</Link>      | Get a folder's information      |
| <Link href="/reference/get-web-links-id">`GET /web_links/:id`</Link> | Get a web link's information    |
| <Link href="/reference/get-shared-items">`GET /shared_items`</Link>  | Get a shared item's information |

The response of these APIs calls depends on the existence of the item,
and whether the `etag` value matches the most recent version.

| Item found? | Etag match? | HTTP Status |
| ----------- | ----------- | ----------- |
| Yes         | Yes         | 304         |
| Yes         | No          | 200         |
| No          | Yes         | 404         |
| No          | No          | 404         |

<RelatedLinks
  title="RELATED APIS"
  items={[
    { label: "Upload file version", href: "/reference/post-files-id-content", badge: "POST" },
    { label: "Update file", href: "/reference/put-files-id", badge: "PUT" },
    { label: "Delete file", href: "/reference/delete-files-id", badge: "DELETE" },
    { label: "Update folder", href: "/reference/put-folders-id", badge: "PUT" },
    { label: "Delete folder", href: "/reference/delete-folders-id", badge: "DELETE" },
    { label: "Update web link", href: "/reference/put-web-links-id", badge: "PUT" },
    { label: "Remove web link", href: "/reference/delete-web-links-id", badge: "DELETE" },
    { label: "Get file information", href: "/reference/get-files-id", badge: "GET" },
    { label: "Get folder information", href: "/reference/get-folders-id", badge: "GET" },
    { label: "Get web link", href: "/reference/get-web-links-id", badge: "GET" },
    { label: "Find file for shared link", href: "/reference/get-shared-items", badge: "GET" }
  ]}
/>
